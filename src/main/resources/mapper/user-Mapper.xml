<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.school.mapper.UserMapper">
	
	<!-- 로그인 -->
	<select id="getUserAccount" resultType="UserDTO">
		SELECT * FROM user_tbl
		WHERE user_id = #{userId}
	</select>
	
	<!-- 회원가입 -->
	<select id="saveUser" parameterType="UserDTO">
		INSERT INTO user_tbl
		(student_idx,user_id, user_pw, user_auth,user_join)
		VALUES(#{studentIdx},#{userId},#{userPw},#{userAuth},now());
	</select>
	
	<!-- 아이디 중복체크 -->
	<select id="idChk" parameterType="String" resultType="int">
		SELECT count(*)
		FROM user_tbl
		WHERE user_id = #{userId}
	</select>
	
	<!-- 학생이 등록된 테이블에서 학번체크 -->
	<select id="studentIdxChk" parameterType="int" resultType="int">
		SELECT count(*) 
		FROM student_tbl
		WHERE student_idx = #{studentIdx}
		
	</select>
	<!-- 아이디 테이블에서 더블체크 -->
	<select id="studentIdxDoubleChk" parameterType="int" resultType="int">
		SELECT count(*) 
			FROM user_tbl
		WHERE student_idx = #{studentIdx}
	</select>
	
</mapper>